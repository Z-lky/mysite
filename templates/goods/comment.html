{% extends 'base.html' %}
{% block title %}å¤è£…è¯¦æƒ…é¡µ{% endblock %}

{% block style %}
    <link rel="stylesheet" href="/static/css/detail.css">
    <link rel="stylesheet" href="/static/css/index_test.css">
    <style>
        .header-span {
            width: 100%;
            height: 30px;
            margin-bottom: 10px;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            padding: 10px;
            border-bottom: 1px solid #16b777;
        }

        .header-span span {
            margin-left: 100px;
            color: #fff;
        }

        /* åŸºæœ¬çš„å®¹å™¨æ ·å¼ï¼Œç¡®ä¿æ‰€æœ‰è¯„è®ºéƒ½åœ¨ä¸€ä¸ªæ¸…æ™°çš„åŒºåŸŸå†… */
        .essay-container {
            height: auto;
            margin: 20px auto; /* ä¸Šä¸‹20pxå¤–è¾¹è·ï¼Œå·¦å³è‡ªåŠ¨å±…ä¸­ */
            padding: 10px; /* å†…è¾¹è· */
            background-color: #f9f9f9; /* èƒŒæ™¯è‰²ï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´ */
            border: 1px solid #ddd; /* è¾¹æ¡†ï¼Œå¢åŠ å±‚æ¬¡æ„Ÿ */
            border-radius: 8px; /* è¾¹æ¡†åœ†è§’ */
        }

        /* è¯„è®ºå¡ç‰‡çš„æ ·å¼ */
        .essay-card {
            margin-bottom: 20px; /* æ¯ä¸ªè¯„è®ºå¡ç‰‡ä¹‹é—´æœ‰é—´éš” */
            padding: 15px; /* å†…è¾¹è· */
            background-color: #fff; /* èƒŒæ™¯è‰² */
            border: 1px solid #eee; /* è¾¹æ¡† */
            border-radius: 5px; /* è¾¹æ¡†åœ†è§’ */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* è½»å¾®çš„é˜´å½±æ•ˆæœ */
        }

        /* ä½œè€…å’Œå‘å¸ƒæ—¶é—´çš„æ ·å¼ */
        .essay-info {
            color: #666; /* å­—ä½“é¢œè‰² */
            font-size: 0.9rem; /* å­—ä½“å¤§å° */
            margin-bottom: 10px; /* ä¸å†…å®¹ä¹‹é—´çš„é—´éš” */
        }

        .author, .publish-time {
            margin: 0; /* ç§»é™¤é»˜è®¤çš„margin */
        }

        /* è¯„ä»·å†…å®¹çš„æ ·å¼ */
        .essay-content {
            font-size: 1rem; /* å­—ä½“å¤§å° */
            line-height: 1.6; /* è¡Œé«˜ï¼Œå¢åŠ å¯è¯»æ€§ */
            color: #333; /* å­—ä½“é¢œè‰² */
        }

        /* å¯é€‰çš„ï¼šå¦‚æœä½ æƒ³åœ¨ä½œè€…æˆ–æ—¶é—´æ—è¾¹æ·»åŠ å›¾æ ‡ï¼Œå¯ä»¥è¿™æ ·åš */
        .author::before {
            content: "ğŸ‘¤"; /* ä½¿ç”¨Unicodeå­—ç¬¦ä½œä¸ºå›¾æ ‡ */
            margin-right: 5px; /* ä¸æ–‡æœ¬ä¹‹é—´çš„é—´éš” */
        }

        .publish-time::before {
            content: "â°"; /* ä½¿ç”¨Unicodeå­—ç¬¦ä½œä¸ºå›¾æ ‡ */
            margin-right: 5px; /* ä¸æ–‡æœ¬ä¹‹é—´çš„é—´éš” */
        }
    </style>
{% endblock %}
{% block content %}
    <div cd="25">
        <div class="header-span" style="height: 60px;">
            <span class="layui-breadcrumb">
                  <a href="/">é¦–é¡µ</a>
                  <a href="/category_detail/{{ goods_html.category.id }}/">{{ goods_html.category.cname }}</a>
                  <a href="/goods_detail/{{ goods_html.id }}/"><cite>{{ goods_html.gname }}</cite></a>
            </span>
        </div>
        <!-- detail-content -->
        <div class="detail-content">
            <div class="detail-con-left">
                <img id="rightimg" src="/{{ goods_html.gimage }}" style="width: 350px;height: 400px;" alt="">
            </div>
            <div class="detail-con-right">
                <h3>{{ goods_html.gname }}</h3>
                <div class="price">
                    <i>ï¿¥</i>
                    <p>{{ goods_html.gprice }}</p>
                </div>

                <div class="line"></div>
                <div class="color">
                    <p class="p-item">æ¬¾å¼ï¼š</p>
                    <ul class="MinImgList">
                        {#                        æœ‰å¾…å®Œå–„ï¼Ÿï¼Ÿï¼Ÿ#}
                        <li class="MinImg  active" colorid="{{ goods_html.id }}">
                            <img src="/{{ goods_html.gimage }}" width="30px" height="30px">
                        </li>
                    </ul>
                </div>
                <div class="size">
                    <p class="p-item">
                        å°ºç ï¼š
                    </p>
                    <ul class="size-list">
                        {% for size in size_list %}
                            <li sizeid="{{ size.id }}"
                                class="size-item {% if forloop.first %} active {% endif %}">{{ size.sname }}</li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="num">
                    <p class="p-item">
                        æ•°é‡ï¼š
                    </p>
                    <div class="jian">-</div>
                    <input type="number" name="" value="1">
                    <div class="jia">+</div>
                </div>
                <form action="/cart/addCart/" method="post">
                    {#                    <input name="colorid" type="hidden">#}
                    <input name="goodsid" type="hidden" value="{{ goods_html.id }}">
                    <input name="sizeid" type="hidden">
                    <input name="count" type="hidden">
                    <input name="type" value="add" type="hidden">
                    {% csrf_token %}
                    {#                    <input type="hidden" name="csrfmiddlewaretoken"#}
                    {#                           value="QYciumFpuMt1tAzw4HyUsSbgralhP9ykf6fRRkLbNhqtrzI6FElzKnFZdIenh6pT">#}
                    <button class="male" onclick="goCart()" style="background-color: #16b777;">åŠ å…¥è´­ç‰©è½¦</button>
                </form>
            </div>
            <div class="detail-con-nav">
                <ul class="detail-nav">
                    <li class=" nav-item "><a href="/goods_detail/{{ goods_html.id }}/">å•†å“è¯¦æƒ…</a>
                    </li>
                    <li class="active nav-item"><a href="/goods_detail/{{ goods_html.id }}/comment/">å•†å“è¯„ä»·</a></li>
                </ul>
            </div>
             <div class="zhanshi" style="width: 100%;">
                {% for comment in comments_list %}
                    <div class="essay-container" style="width: 100%;">
                        <div class="essay-card">
                            <div class="essay-info">
                                <p class="author">è¯„ä»·è€…ï¼š{{ comment.getName }}</p>
                                <p class="publish-time">è¯„ä»·å†…å®¹æ—¶é—´ï¼š{{ comment.time }}</p>
                            </div>
                            <p class="essay-content">è¯„ä»·æ—¶é—´å†…å®¹ï¼š{{ comment.content }}</p>
                        </div>
                    </div>
                {% endfor %}
            
            </div>
        </div>
    </div>


{% endblock %}

{% block script %}
    <script>
        $('.MinImg').click(function () {
            $('.MinImg').removeClass('active')
            $(this).addClass('active')
            $('#rightimg').attr('src', $(this).children('img').attr('src'))
        })
        $('.size-item').click(function () {
            $('.size-item').removeClass('active')
            $(this).addClass('active')
        })
        $('.jian').click(function () {

            num_text_view = $('.num').children('input[type="number"]')
            val = $(num_text_view).val()
            if (val <= 1) return
            $(num_text_view).val(val - 1)
        })
        $('.jia').click(function () {
            <!--å‘ç»™æœåŠ¡å™¨é—®ä¸€ä¸‹è¿™ä¸ªå•†å“(å•†å“+é¢œè‰²+å°ºå¯¸)è¿˜æœ‰æ²¡æœ‰è´§-->
            num_text_view = $('.num').children('input[type="number"]')
            val = eval($(num_text_view).val())
            if (val >= 60) return
            $(num_text_view).val(val + 1)

        })
        //å•ç‹¬è´­ä¹°
        //<input type="hidden" name="colorid" value=""/>
        function goCart() {

            //<li class="MinImgactive" colorid="11"></li>
            $('form').children('input[name="sizeid"]').val($('.size-item.active').attr('sizeid'))
            $('form').children('input[name="count"]').val($('.num').children('input[type="number"]').val())


        }
    </script>
{% endblock %}